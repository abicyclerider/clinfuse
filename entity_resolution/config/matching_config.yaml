# Entity Resolution Configuration
# run_id and base_dir are now passed via CLI args (--augmented-dir, --output-dir)

# Splink v4 probabilistic linkage settings
splink:
  predict_threshold: 0.01       # Minimum match probability to keep as candidate
  auto_match_probability: 0.95  # P >= 0.95 → definite match
  auto_reject_probability: 0.05 # P < 0.05 → definite non-match

# Gray zone: logit-space combination of Splink probability + LLM confidence
gray_zone:
  w_splink: 1.0     # weight on Splink log-odds
  w_llm: 1.0        # weight on LLM log-odds
  threshold: 0.0     # combined logit threshold (0.0 = 50/50 odds)
  min_splink_probability: 0.3  # floor: reject LLM match if Splink P < this
  # Bayesian prior correction: shifts LLM logit to account for training vs
  # production base rate mismatch.  correction = logit(gz_prior) - logit(train_prior)
  llm_training_prior: 0.5    # base rate in LLM training data (balanced 50/50)
  gray_zone_prior: 0.025     # estimated true-match rate in the gray zone

# Golden record creation
golden_record:
  conflict_resolution: "most_frequent"
  include_provenance: true

# Output
output:
  golden_records_csv: "golden_records.csv"
  matches_csv: "predicted_matches.csv"
  metrics_json: "evaluation_metrics.json"
  verbose: true
